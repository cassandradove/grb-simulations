# COSI GRB Group Simulations

This repo contains the code and inputs for COSI GRB simulations, as well as other short-duration transients which will need to be classified and investigated by the GRB group.

'examples/' contains sample .yaml files needed for 'sample_source_file_generation.py'. See the README file in 'examples/' for more details.

'MEGAlib_source_inputs/' contains the information necessary to generate a given simulation set in COSI. This is sub-divided into folders by event type, currently including gamma-ray bursts (grbs), magnetar giant flares (mgfs), soft gamma-ray repeater short bursts (sgr bursts), solar flares (solar_flares), and terrestrial gamma-ray flashses (tgfs). Each of these is further subdivided into the specific input samples generated by various team members. These will generally be spectral (.dat/.yaml) and lightcurve (.dat) files, as well as relevant images (.pdf, .png, etc). Each of these individual samples should contain a text or catalog file describing the sample as well as the responsible team member. For use with 'sample_source_file_generation.py', spectral files must be in the form 'event-name_spectrum.dat' or 'event-name_spectrum.yaml' and lightcurves must be in the form 'event-name_lightcurve.dat'.

'sample_source_file_generation.py' will create source file samples based an on an input .yaml file. This will draw lightcurves and spectra from the samples in 'MEGAlib_source_inputs/' and create .source files in a specified directory. The .source files are created with the defined mass model path, fluxes, and incidence angles. Currently, this only produces .source files in detector coordinates, but the ability to create .source files in Galactic coordinates with orientation files will be added later, as well as polarization.  
To run from the command line: `python sample_source_file_generation.py -y input-file.yaml`.

'trigger_algorithm_list_generation.py' creates event lists with the time and energy of each hit in the BGO and GeDs based on an input .yaml file. This draws source and background simulations (.sim files) from specified input directories and creates trigger algroithm files in a specified output directory.        
To run from the command line: `python trigger_algorithm_list_generation.py -y input-file.yaml`.

MEGAlib source files (outputs of 'sample_source_file_generation.py') can be found [here](https://drive.google.com/drive/folders/1SAxRKPWObcZQ8T93njdKWMTDuI4_-Bx3). Simulations of GRBs and other transients can be found [here](https://drive.google.com/drive/folders/1aPKtB7uTr5LNG3xGbeCpIPTbAW6ibvk3), and background simulations can be found [here](https://drive.google.com/drive/folders/1OTN-_8gUxedueEbL3mPeh0_0kh7e9kKF). Event files (outputs of 'trigger_algorithm_list_generation.py') can be found [here](https://drive.google.com/drive/folders/1ibXOrTFD2-ntYy54HbWRXj7YYmueEl0e).
